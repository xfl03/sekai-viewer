(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[18],{6037:function(e,a,t){"use strict";var n=t(1),r=t(2),l=t(0),c=(t(4),t(3)),i=t(5),o=l.forwardRef((function(e,a){var t=e.classes,i=e.className,o=e.component,s=void 0===o?"div":o,u=Object(r.a)(e,["classes","className","component"]);return l.createElement(s,Object(n.a)({className:Object(c.a)(t.root,i),ref:a},u))}));a.a=Object(i.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(o)},6176:function(e,a,t){"use strict";t.r(a);var n=t(12),r=t(172),l=t(40),c=t(5995),i=t(87),o=t(6183),s=t(6172),u=t(5991),d=t(5994),m=t(6037),g=t(5959),p=t(6048),f=t(6009),h=t(71),b=t(90),v=t(6177),y=t(6178),E=t(0),w=t.n(E),k=t(13),x=t(6038),j=t.n(x),O=t(36),_=t(6040),N=t(6041),I=t.n(N),C=t(5990),M=t(41),R={1:{bg:"bg_gacha1",feature:"img_gacha1_1"},2:{bg:"bg_gacha_rare3_ticket_2020"},3:{bg:"bg_gacha_virtualsinger_2020"}},W=Object(r.a)((function(e){return{media:{paddingTop:"56.25%",cursor:"pointer"},card:{margin:e.spacing(.5)},tabpanel:{padding:e.spacing("1%",0,0,0)},subheader:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis","max-width":"260px"},gachaBtn:{margin:e.spacing(0,1)}}}));function D(e){var a=[];return R[e.id]?(R[e.id].bg&&a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(R[e.id].bg,".webp"),alt:"background",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(R[e.id].bg,".webp")}),R[e.id].feature&&a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(R[e.id].feature,".webp"),alt:"feature",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/").concat(R[e.id].feature,".webp")})):(a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/bg_gacha").concat(e.id,".webp"),alt:"background",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/bg_gacha").concat(e.id,".webp")}),a.push({src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/img_gacha").concat(e.id,".webp"),alt:"feature",downloadUrl:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(e.assetbundleName,"/screen_rip/texture/img_gacha").concat(e.id,".webp")})),a}var B=function(e){var a=e.num;return w.a.createElement(E.Fragment,null,Array.from({length:a}).map((function(e,a){return w.a.createElement("img",{key:a,src:I.a,alt:"star",height:"24px"})})))};a.default=function(e){var a=e.contentTransMode,t=W(),r=Object(b.a)(),x=Object(k.g)().gachaId,N=Object(C.a)().t,I=Object(M.b)(),S=I.assetT,T=I.assetI18n,Y=Object(E.useState)(),A=Object(n.a)(Y,2),F=A[0],G=A[1],U=Object(O.c)("gachas"),L=Object(n.a)(U,1)[0],z=Object(E.useState)(!1),J=Object(n.a)(z,2),P=J[0],V=J[1],X=Object(E.useState)("4"),q=Object(n.a)(X,2),H=q[0],K=q[1],Q=Object(E.useState)(0),Z=Object(n.a)(Q,2),$=Z[0],ee=Z[1],ae=Object(E.useState)({total:0,rarity1:0,rarity2:0,rarity3:0,rarity4:0}),te=Object(n.a)(ae,2),ne=te[0],re=te[1],le=Object(E.useState)([]),ce=Object(n.a)(le,2),ie=ce[0],oe=ce[1],se=Object(O.f)(!1),ue=Object(n.a)(se,3),de=ue[1],me=ue[2],ge=Object(O.c)("cards"),pe=Object(n.a)(ge,1)[0];function fe(e){for(var a=e,t=[null===F||void 0===F?void 0:F.rarity1Rate,(null===F||void 0===F?void 0:F.rarity1Rate)+(null===F||void 0===F?void 0:F.rarity2Rate),(null===F||void 0===F?void 0:F.rarity1Rate)+(null===F||void 0===F?void 0:F.rarity2Rate)+(null===F||void 0===F?void 0:F.rarity3Rate),(null===F||void 0===F?void 0:F.rarity1Rate)+(null===F||void 0===F?void 0:F.rarity2Rate)+(null===F||void 0===F?void 0:F.rarity3Rate)+(null===F||void 0===F?void 0:F.rarity4Rate)],n=[100-(null===F||void 0===F?void 0:F.rarity4Rate),100],r=[null===F||void 0===F?void 0:F.gachaDetails.filter((function(e){var a;return 1===(null===(a=pe.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)})),null===F||void 0===F?void 0:F.gachaDetails.filter((function(e){var a;return 2===(null===(a=pe.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)})),null===F||void 0===F?void 0:F.gachaDetails.filter((function(e){var a;return 3===(null===(a=pe.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)})),null===F||void 0===F?void 0:F.gachaDetails.filter((function(e){var a;return 4===(null===(a=pe.find((function(a){return a.id===e.cardId})))||void 0===a?void 0:a.rarity)}))],l=[],c=0,i=0;i<a;i++)if(i%10!==9||9!==c){i%10===0&&(c=0);var o,s=99*Math.random()+1;if(s<=t[0])re((function(e){return Object.assign({},e,{total:e.total+1,rarity1:e.rarity1+1})})),l.push(r[0][Math.floor(Math.random()*(null===(o=r[0])||void 0===o?void 0:o.length))]),c++;else if(s<=t[1]){var u;re((function(e){return Object.assign({},e,{total:e.total+1,rarity2:e.rarity2+1})})),l.push(r[1][Math.floor(Math.random()*(null===(u=r[1])||void 0===u?void 0:u.length))]),c++}else if(s<=t[2]){var d;re((function(e){return Object.assign({},e,{total:e.total+1,rarity3:e.rarity3+1})})),l.push(r[2][Math.floor(Math.random()*(null===(d=r[2])||void 0===d?void 0:d.length))])}else if(s<=t[3]){var m;re((function(e){return Object.assign({},e,{total:e.total+1,rarity4:e.rarity4+1})})),l.push(r[3][Math.floor(Math.random()*(null===(m=r[3])||void 0===m?void 0:m.length))])}else console.log(s,t)}else{var g,p=99*Math.random()+1;if(p<n[0])re((function(e){return Object.assign({},e,{total:e.total+1,rarity3:e.rarity3+1})})),l.push(r[2][Math.floor(Math.random()*(null===(g=r[2])||void 0===g?void 0:g.length))]);else if(p<n[1]){var f;re((function(e){return Object.assign({},e,{total:e.total+1,rarity4:e.rarity4+1})})),l.push(r[3][Math.floor(Math.random()*(null===(f=r[3])||void 0===f?void 0:f.length))])}else console.log(p,n);c=0}oe(l.slice(-10))}Object(E.useEffect)((function(){me(Boolean(L.length)),Boolean(L.length)&&G(L.find((function(e){return e.id===Number(x)})))}),[me,x,L]),Object(E.useEffect)((function(){F&&(document.title="".concat("original"===a?F.name:"translated"===a?S("gacha_name:".concat(x),F.name):F.name," | Gacha | Sekai Viewer"))}),[F,T,a,x,S]);return de&&F?w.a.createElement(E.Fragment,null,w.a.createElement(l.a,{variant:"h6",className:r.header},"original"===a?F.name:"translated"===a?S("gacha_name:".concat(x),F.name):F.name),w.a.createElement(c.a,{className:r.content,maxWidth:"sm"},w.a.createElement(v.a,{value:H},w.a.createElement(i.a,null,w.a.createElement(o.a,{value:H,onChange:function(e,a){K(a)},variant:"scrollable",scrollButtons:"desktop"},w.a.createElement(s.a,{label:N("gacha:tab.title[0]"),value:"2"}),w.a.createElement(s.a,{label:N("gacha:tab.title[1]"),value:"3"}),w.a.createElement(s.a,{label:N("gacha:tab.title[2]"),value:"4"}),w.a.createElement(s.a,{label:N("gacha:tab.title[3]"),value:"0"}),R[F.id]?R[F.id].feature?w.a.createElement(s.a,{label:N("gacha:tab.title[4]"),value:"1"}):null:F.id>=4?w.a.createElement(s.a,{label:N("gacha:tab.title[4]"),value:"1"}):null),w.a.createElement(y.a,{value:"0",classes:{root:t.tabpanel}},w.a.createElement(u.a,{onClick:function(){ee(0),V(!0)}},w.a.createElement(d.a,{className:t.media,image:F?"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(F.assetbundleName,"/screen_rip/texture/").concat(R[F.id]?R[F.id].bg:"bg_gacha".concat(x),".webp"):""}))),w.a.createElement(y.a,{value:"1",classes:{root:t.tabpanel}},w.a.createElement(u.a,{onClick:function(){ee(1),V(!0)}},w.a.createElement(d.a,{className:t.media,image:F?"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(F.assetbundleName,"/screen_rip/texture/").concat(R[F.id]?R[F.id].feature:"img_gacha".concat(x),".webp"):""}))),w.a.createElement(y.a,{value:"2",classes:{root:t.tabpanel}},w.a.createElement(u.a,null,w.a.createElement(m.a,null,F.gachaInformation.description.split("\n").map((function(e,a){return w.a.createElement(l.a,{paragraph:!0,variant:"body2",key:"desc-".concat(a)},e)}))))),w.a.createElement(y.a,{value:"3",classes:{root:t.tabpanel}},w.a.createElement(u.a,null,w.a.createElement(m.a,null,F.gachaInformation.summary.split("\n").map((function(e,a){return w.a.createElement(l.a,{paragraph:!0,variant:"body2",key:"summary-".concat(a)},e)}))))),w.a.createElement(y.a,{value:"4",classes:{root:t.tabpanel}},w.a.createElement(u.a,null,w.a.createElement(m.a,null,w.a.createElement(l.a,{paragraph:!0},w.a.createElement(B,{num:2}),F.rarity2Rate," % ",w.a.createElement(B,{num:3}),F.rarity3Rate," % ",w.a.createElement(B,{num:4}),F.rarity4Rate," %"),w.a.createElement("div",null,w.a.createElement(g.a,{variant:"contained",className:t.gachaBtn,color:"secondary",onClick:function(){return fe(1)}},"Gacha!"),w.a.createElement(g.a,{variant:"contained",className:t.gachaBtn,color:"primary",onClick:function(){return fe(10)}},"Gacha * 10"),w.a.createElement(g.a,{variant:"contained",className:t.gachaBtn,color:"primary",onClick:function(){return fe(100)}},"Gacha * 100"),w.a.createElement(g.a,{variant:"contained",className:t.gachaBtn,color:"primary",onClick:function(){return fe(1e3)}},"Gacha * 1000"),w.a.createElement(g.a,{variant:"contained",className:t.gachaBtn,color:"primary",onClick:function(){return re({total:0,rarity1:0,rarity2:0,rarity3:0,rarity4:0}),void oe([])}},"Reset")),w.a.createElement(l.a,{paragraph:!0},w.a.createElement("span",{style:{marginRight:"1%"}},"Total: ",ne.total),w.a.createElement(B,{num:2}),ne.rarity2," ",ne.total?(ne.rarity2/ne.total*100).toFixed(2):0," ","%",w.a.createElement(B,{num:3}),ne.rarity3," ",ne.total?(ne.rarity3/ne.total*100).toFixed(2):0," ","%",w.a.createElement(B,{num:4}),ne.rarity4," ",ne.total?(ne.rarity4/ne.total*100).toFixed(2):0," ","%")),w.a.createElement(m.a,null,w.a.createElement(_.c,{cardIds:ie.map((function(e){return e.cardId}))})))))),w.a.createElement(p.a,{paddingX:"2%",display:"flex",flexDirection:"column"},w.a.createElement(p.a,{display:"flex",flexDirection:"row",flexWrap:"no-wrap",justifyContent:"space-between",alignItems:"center",paddingY:"1%"},w.a.createElement(l.a,{variant:"subtitle1",style:{fontWeight:600}},N("common:id")),w.a.createElement(l.a,null,F.id)),w.a.createElement(f.a,null),w.a.createElement(p.a,{display:"flex",flexDirection:"row",flexWrap:"no-wrap",justifyContent:"space-between",alignItems:"center",paddingY:"1%"},w.a.createElement(l.a,{variant:"subtitle1",style:{fontWeight:600}},N("common:title")),w.a.createElement(l.a,null,"original"===a?F.name:"translated"===a?S("gacha_name:".concat(x),F.name):F.name)),w.a.createElement(f.a,null),w.a.createElement(p.a,{display:"flex",flexDirection:"row",flexWrap:"no-wrap",justifyContent:"space-between",alignItems:"center",paddingY:"1%"},w.a.createElement(l.a,{variant:"subtitle1",style:{fontWeight:600}},N("common:icon")),w.a.createElement("img",{style:{maxWidth:"50%"},src:"".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/gacha/").concat(F.assetbundleName,"/logo_rip/logo.webp"),alt:"logo icon"})),w.a.createElement(f.a,null),w.a.createElement(p.a,{display:"flex",flexDirection:"row",flexWrap:"no-wrap",justifyContent:"space-between",alignItems:"center",paddingY:"1%"},w.a.createElement(l.a,{variant:"subtitle1",style:{fontWeight:600}},N("common:startAt")),w.a.createElement(l.a,null,new Date(F.startAt).toLocaleString())),w.a.createElement(f.a,null),w.a.createElement(p.a,{display:"flex",flexDirection:"row",flexWrap:"no-wrap",justifyContent:"space-between",alignItems:"center",paddingY:"1%"},w.a.createElement(l.a,{variant:"subtitle1",style:{fontWeight:600}},N("common:endAt")),w.a.createElement(l.a,null,new Date(F.endAt).toLocaleString())),w.a.createElement(f.a,null),w.a.createElement(p.a,{display:"flex",flexDirection:"row",flexWrap:"no-wrap",justifyContent:"space-between",alignItems:"center",paddingY:"1%"},w.a.createElement(l.a,{variant:"subtitle1",style:{fontWeight:600}},N("common:type")),w.a.createElement(l.a,null,N("gacha:gachaType.".concat(F.gachaType)))),w.a.createElement(f.a,null),w.a.createElement(h.a,{container:!0,wrap:"nowrap",justify:"space-between",alignItems:"center",style:{padding:"1% 0"}},w.a.createElement(l.a,{variant:"subtitle1",style:{fontWeight:600}},N("gacha:pickupMember",{count:F.gachaPickups.length})),w.a.createElement(h.a,{item:!0,container:!0,direction:"row",xs:6,spacing:1,justify:"flex-end"},F.gachaPickups.map((function(e){return w.a.createElement(h.a,{key:"pickup-".concat(e.id),item:!0,xs:8,md:4},w.a.createElement(_.a,{id:e.cardId}))})))),w.a.createElement(f.a,null))),w.a.createElement(j.a,{visible:P,onClose:function(){return V(!1)},images:D(F),zIndex:2e3,activeIndex:$,downloadable:!0,downloadInNewWindow:!0,onMaskClick:function(){return V(!1)},zoomSpeed:.25,onChange:function(e,a){return ee(a)}})):w.a.createElement("div",null,"Loading... If you saw this for a while, gacha ",x," does not exist.")}}}]);
//# sourceMappingURL=18.32a8d05e.chunk.js.map